#!/bin/bash
#SBATCH --job-name=make_dataset           # ä»»åŠ¡å
#SBATCH --partition=h07q1               # åˆ†åŒºåï¼ˆå¦‚æœæœ‰åˆ«çš„åˆ†åŒºè¯·æ›¿æ¢ï¼‰
#SBATCH --nodes=1                         # èŠ‚ç‚¹æ•°
#SBATCH --ntasks=1                        # ä»»åŠ¡æ•°
#SBATCH --cpus-per-task=4                 # æ¯ä¸ªä»»åŠ¡ä½¿ç”¨4ä¸ªCPUæ ¸å¿ƒ
#SBATCH --mem=8G                          # åˆ†é…å†…å­˜
#SBATCH --time=01:00:00                   # æœ€é•¿è¿è¡Œæ—¶é—´
#SBATCH --output=logs/make_dataset_%j.out # æ ‡å‡†è¾“å‡º
#SBATCH --error=logs/make_dataset_%j.err  # é”™è¯¯æ—¥å¿—

echo "ğŸš€ ä½œä¸šå¼€å§‹äº: $(date)"
echo "ğŸ“Œ èŠ‚ç‚¹: $(hostname)"
echo "ğŸ”§ ä½¿ç”¨ CPU æ ¸æ•°: $SLURM_CPUS_PER_TASK"

# åŠ è½½ç¯å¢ƒ
source ~/.bashrc
conda activate refgame

# è¿è¡Œæ•°æ®å¤„ç†è„šæœ¬ï¼Œæ¨èåœ¨è„šæœ¬ä¸­ä½¿ç”¨å¤šçº¿ç¨‹ï¼ˆå¦‚ joblib, multiprocessing, torch ç­‰ï¼‰
python scripts/make_eng_cmn_dataset.py

echo "âœ… ä½œä¸šç»“æŸäº: $(date)"
