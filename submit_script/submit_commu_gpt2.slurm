#!/bin/bash
#SBATCH --job-name=commu_gpt          # ä»»åŠ¡å
#SBATCH --partition=normal               # åˆ†åŒºåï¼ˆå¦‚æœæœ‰åˆ«çš„åˆ†åŒºè¯·æ›¿æ¢ï¼‰
#SBATCH --nodes=1                         # èŠ‚ç‚¹æ•°
#SBATCH --ntasks=1                        # ä»»åŠ¡æ•°
#SBATCH --cpus-per-task=8                 # æ¯ä¸ªä»»åŠ¡ä½¿ç”¨4ä¸ªCPUæ ¸å¿ƒ
#SBATCH --mem=16G                          # åˆ†é…å†…å­˜
#SBATCH --time=08:00:00                   # æœ€é•¿è¿è¡Œæ—¶é—´
#SBATCH --output=logs/commu_%j.out # æ ‡å‡†è¾“å‡º
#SBATCH --error=logs/commu_%j.err  # é”™è¯¯æ—¥å¿—

echo "ğŸš€ ä½œä¸šå¼€å§‹äº: $(date)"
echo "ğŸ“Œ èŠ‚ç‚¹: $(hostname)"
echo "ğŸ”§ ä½¿ç”¨ CPU æ ¸æ•°: $SLURM_CPUS_PER_TASK"

module load miniconda3/24.3.0-gcc-11.5.0-linux-rocky9-cascadelake-nwowwvl
# åŠ è½½ç¯å¢ƒ
conda activate refgame

# è¿è¡Œæ•°æ®å¤„ç†è„šæœ¬ï¼Œæ¨èåœ¨è„šæœ¬ä¸­ä½¿ç”¨å¤šçº¿ç¨‹ï¼ˆå¦‚ joblib, multiprocessing, torch ç­‰ï¼‰
python scripts/commu_gpt.py

echo "âœ… ä½œä¸šç»“æŸäº: $(date)"
